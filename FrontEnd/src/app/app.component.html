<!-- Arquivo: app.component.html (Template HTML) -->
<div class="bg-gray-100 min-h-screen font-sans flex flex-col">
  <!-- Header -->
  <app-header 
    [cartCount]="cartCount" 
    (search)="handleSearch($event)">
  </app-header>

  <main class="container mx-auto px-4 py-6 flex-grow max-w-[1280px]">
    
    <!-- Banners (Só exibe se não estiver buscando) -->
    <section *ngIf="!isFiltering()" class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8 animate-fade-in">
      <div class="md:col-span-2 bg-gradient-to-r from-purple-800 to-indigo-600 h-48 md:h-[340px] rounded-lg flex items-center px-8 md:px-16 text-white relative overflow-hidden shadow-md group cursor-pointer">
         <div class="z-10 max-w-lg relative">
           <span class="bg-magalu-yellow text-blue-900 px-3 py-1 rounded text-xs font-bold uppercase mb-4 inline-block shadow-sm tracking-wide">Saldão Lojinha</span>
           <h2 class="text-3xl md:text-5xl font-black mb-4 leading-tight drop-shadow-md">Semana Tech <br/>Imperdível</h2>
           <p class="mb-8 text-purple-100 text-sm md:text-lg font-medium">Descontos de até 50% no PIX + Frete Grátis.</p>
           <button class="bg-white text-purple-800 font-bold py-3 px-8 rounded-full hover:bg-magalu-yellow hover:text-blue-900 transition-all shadow-lg active:scale-95 transform group-hover:translate-x-2">
             Conferir ofertas
           </button>
         </div>
         
         <!-- Elementos Decorativos de Fundo -->
         <div class="absolute right-0 bottom-0 w-[400px] h-[400px] bg-white/10 rounded-full blur-[80px] -mr-20 -mb-20 pointer-events-none"></div>
         <div class="absolute top-10 right-10 text-[180px] opacity-10 rotate-12 pointer-events-none">
           <i class="fas fa-tags"></i>
         </div>
      </div>
      
      <!-- Banner Lateral -->
      <div class="bg-blue-100 rounded-lg p-8 flex flex-col justify-center items-start text-blue-900 h-48 md:h-[340px] shadow-md border border-blue-200 relative overflow-hidden">
        <div class="z-10">
          <h3 class="font-bold text-2xl mb-3">Baixe o SuperApp</h3>
          <p class="text-base mb-6 opacity-80 font-medium">Frete grátis e ofertas exclusivas na palma da sua mão.</p>
          <div class="flex flex-col gap-3 w-full max-w-[180px]">
             <button class="bg-gray-900 text-white py-2 px-4 rounded flex items-center justify-center gap-2 hover:bg-black transition shadow">
                <i class="fab fa-google-play text-lg"></i> 
                <div class="text-left">
                  <div class="text-[8px] uppercase">Disponível no</div>
                  <div class="text-xs font-bold leading-none">Google Play</div>
                </div>
             </button>
             <button class="bg-gray-900 text-white py-2 px-4 rounded flex items-center justify-center gap-2 hover:bg-black transition shadow">
                <i class="fab fa-apple text-xl"></i>
                <div class="text-left">
                  <div class="text-[8px] uppercase">Baixar na</div>
                  <div class="text-xs font-bold leading-none">App Store</div>
                </div>
             </button>
          </div>
        </div>
        <div class="absolute -right-8 bottom-0 text-[150px] text-blue-200 opacity-50 rotate-12 pointer-events-none">
          <i class="fas fa-mobile-alt"></i>
        </div>
      </div>
    </section>

    <!-- Título da Seção -->
    <div class="flex items-center justify-between mb-6 border-b border-gray-200 pb-4">
      <h2 class="text-xl md:text-2xl font-bold text-gray-800 flex items-center gap-2">
        <span *ngIf="isFiltering()" class="text-magalu-blue"><i class="fas fa-search"></i></span>
        <span *ngIf="isFiltering()">Resultados para "{{ currentFilter() }}"</span>
        <span *ngIf="!isFiltering()">As melhores ofertas para você</span>
      </h2>
      
      <button *ngIf="isFiltering()" (click)="clearFilter()" class="text-magalu-blue text-sm hover:underline font-bold flex items-center gap-1 px-3 py-1 bg-white rounded border border-gray-200 shadow-sm">
        <i class="fas fa-times"></i> Limpar busca
      </button>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading()" class="flex flex-col items-center justify-center py-32">
      <div class="animate-spin rounded-full h-16 w-16 border-b-4 border-magalu-blue mb-4"></div>
      <p class="text-gray-500 font-medium animate-pulse">Carregando as melhores ofertas...</p>
    </div>

    <!-- Grid de Produtos -->
    <div *ngIf="!isLoading()" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">
      @for (product of filteredProducts(); track product.id) {
        <app-product-card 
          [product]="product"
          (addToCart)="addToCart($event)"
        ></app-product-card>
      } @empty {
        <div class="col-span-full py-24 text-center text-gray-500 bg-white rounded-lg border border-gray-200 shadow-sm">
           <div class="mb-4 bg-gray-100 w-24 h-24 rounded-full flex items-center justify-center mx-auto">
             <i class="fas fa-search text-4xl text-gray-300"></i>
           </div>
           <p class="text-xl font-bold text-gray-700">Ops! Nenhum produto encontrado.</p>
           <p class="text-sm mt-2 mb-6">Tente buscar por termos diferentes ou navegue pelas categorias.</p>
           <button (click)="clearFilter()" class="bg-magalu-blue text-white font-bold py-2 px-6 rounded hover:bg-blue-700 transition">
             Ver todas as ofertas
           </button>
        </div>
      }
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-white border-t mt-auto">
    <div class="container mx-auto px-4 py-10">
      <div class="grid grid-cols-2 md:grid-cols-4 gap-8 mb-8">
        <div>
          <h4 class="font-bold text-magalu-blue mb-4 text-sm uppercase tracking-wider">Departamento</h4>
          <ul class="space-y-2 text-sm text-gray-600">
            <li><a href="#" class="hover:underline">Informática</a></li>
            <li><a href="#" class="hover:underline">Celulares</a></li>
            <li><a href="#" class="hover:underline">Eletrodomésticos</a></li>
            <li><a href="#" class="hover:underline">Móveis</a></li>
          </ul>
        </div>
        <div>
          <h4 class="font-bold text-magalu-blue mb-4 text-sm uppercase tracking-wider">Institucional</h4>
          <ul class="space-y-2 text-sm text-gray-600">
            <li><a href="#" class="hover:underline">Sobre a Lojinha</a></li>
            <li><a href="#" class="hover:underline">Investidores</a></li>
            <li><a href="#" class="hover:underline">Trabalhe Conosco</a></li>
          </ul>
        </div>
        <div>
          <h4 class="font-bold text-magalu-blue mb-4 text-sm uppercase tracking-wider">Atendimento</h4>
          <ul class="space-y-2 text-sm text-gray-600">
            <li><a href="#" class="hover:underline">Central de Ajuda</a></li>
            <li><a href="#" class="hover:underline">Trocas e Devoluções</a></li>
          </ul>
        </div>
        <div>
          <h4 class="font-bold text-magalu-blue mb-4 text-sm uppercase tracking-wider">Redes Sociais</h4>
          <div class="flex gap-4 text-2xl text-gray-400">
            <a href="#" class="hover:text-magalu-blue transition"><i class="fab fa-facebook"></i></a>
            <a href="#" class="hover:text-magalu-blue transition"><i class="fab fa-instagram"></i></a>
            <a href="#" class="hover:text-magalu-blue transition"><i class="fab fa-twitter"></i></a>
            <a href="#" class="hover:text-magalu-blue transition"><i class="fab fa-youtube"></i></a>
          </div>
        </div>
      </div>
      <div class="border-t border-gray-100 pt-8 text-center">
        <p class="font-bold text-magalu-blue text-lg mb-2">Lojinha Project</p>
        <p class="text-xs text-gray-500">© 2025 Lojinha - Angular & Spring Boot Demo. Todos os direitos reservados.</p>
        <p class="mt-2 text-[10px] text-gray-400">Preços e condições de pagamento exclusivos para compras via internet.</p>
      </div>
    </div>
  </footer>
</div>